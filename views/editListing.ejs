<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edit Listing | Housify</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- Header Include -->
  <%- include('includes/header.ejs') %>

  <!-- Edit Listing Form -->
  <section class="max-w-4xl mx-auto px-6 py-10">
    <div class="bg-white rounded-xl shadow-lg p-8">
      <h1 class="text-3xl font-bold mb-6">Edit Listing</h1>
      
      <form action="/listing/<%= listing.ID %>" method="POST" class="space-y-6">
        <input type="hidden" name="_method" value="PUT">
        
        <!-- Property Name -->
        <div>
          <label for="name" class="block text-sm font-medium text-gray-700 mb-2">Property Name</label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            value="<%= listing.NAME %>"
            required 
            class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          >
        </div>

        <!-- Description -->
        <div>
          <label for="description" class="block text-sm font-medium text-gray-700 mb-2">Description</label>
          <textarea 
            id="description" 
            name="description" 
            rows="4" 
            required 
            class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          ><%= listing.DESCRIPTION %></textarea>
        </div>

        <!-- Address Fields -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="street" class="block text-sm font-medium text-gray-700 mb-2">Street</label>
            <input 
              type="text" 
              id="street" 
              name="street" 
              value="<%= listing.STREET %>"
              required 
              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
          </div>
          
          <div>
            <label for="city" class="block text-sm font-medium text-gray-700 mb-2">City</label>
            <input 
              type="text" 
              id="city" 
              name="city" 
              value="<%= listing.CITY %>"
              required 
              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
          </div>
          
          <div>
            <label for="state" class="block text-sm font-medium text-gray-700 mb-2">State</label>
            <input 
              type="text" 
              id="state" 
              name="state" 
              value="<%= listing.STATE %>"
              required 
              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
          </div>
          
          <div>
            <label for="pincode" class="block text-sm font-medium text-gray-700 mb-2">Pincode</label>
            <input 
              type="number" 
              id="pincode" 
              name="pincode" 
              value="<%= listing.PINCODE %>"
              required 
              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
          </div>
        </div>

        <!-- Property Details -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div>
            <label for="pricePerMonth" class="block text-sm font-medium text-gray-700 mb-2">Price per Month (â‚¹)</label>
            <input 
              type="number" 
              id="pricePerMonth" 
              name="pricePerMonth" 
              value="<%= listing.PRICEPERMONTH %>"
              required 
              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
          </div>
          
          <div>
            <label for="discount" class="block text-sm font-medium text-gray-700 mb-2">Discount (%)</label>
            <input 
              type="number" 
              id="discount" 
              name="discount" 
              value="<%= listing.DISCOUNT %>"
              min="0" 
              max="100" 
              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
          </div>
          
          <div>
            <label for="size" class="block text-sm font-medium text-gray-700 mb-2">Size (sq ft)</label>
            <input 
              type="number" 
              id="size" 
              name="size" 
              value="<%= listing.SIZE %>"
              required 
              class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
          </div>
        </div>

        <!-- Availability -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Availability</label>
          <div class="flex items-center space-x-4">
            <label class="flex items-center">
              <input 
                type="radio" 
                name="availability" 
                value="true" 
                <%= listing.AVAILABILITY ? 'checked' : '' %>
                class="mr-2"
              >
              <span>Available</span>
            </label>
            <label class="flex items-center">
              <input 
                type="radio" 
                name="availability" 
                value="false" 
                <%= !listing.AVAILABILITY ? 'checked' : '' %>
                class="mr-2"
              >
              <span>Not Available</span>
            </label>
          </div>
        </div>

        <!-- Current Image -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Current Image</label>
          <img src="<%= listing.IMAGE_URL %>" alt="Property Image" class="w-64 h-48 object-cover rounded-lg border">
          <p class="text-sm text-gray-500 mt-2">Note: Image cannot be changed in this edit form. Contact support if you need to update the image.</p>
        </div>

        <!-- Form Actions -->
        <div class="flex justify-end space-x-4 pt-6">
          <a 
            href="/listing/<%= listing.ID %>" 
            class="bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400 transition duration-200"
          >
            Cancel
          </a>
          <button 
            type="submit" 
            class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200"
          >
            Update Listing
          </button>
        </div>
      </form>
    </div>
  </section>

</body>
</html>
